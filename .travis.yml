language: python
python: 3.5

branches:
  except:
    - gh-pages

dist: trusty
sudo: required

before_install: sudo apt-get -y install python3 python3-setuptools

install:
  - pip3 wheel -ve .
  - pip3 install pyossia-${TRAVIS_TAG}*

deploy:
  - provider: pypi
    skip_cleanup: true
    user: $PyPiUser
    password: $PyPiPsswd
    file: ./*.whl
    distributions: bdist_wheel
    on:
      tags: true
      branch: master